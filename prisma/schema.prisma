datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Projeto {
  id               String           @id @default(uuid()) @db.VarChar(36)
  ano              String
  numero_pl        String           @unique
  pautaId          String
  pauta            Pauta            @relation(fields: [pautaId], references: [id]) 
  justificativa    String
  ementa           String
  esferaId         String
  esfera           Esfera           @relation(fields: [esferaId], references: [id])           
  autores          Politico[]       @relation("ProjetoAutores")
  partidos         Partido[]
  direitosViolados DireitoViolado[]
  ideologias       Ideologia[]
}

model Politico {
  id             String      @id @default(uuid()) @db.VarChar(36)
  nome           String
  foto           String?
  sexo           String
  raca           String
  religiao       String
  ideologia      String
  dataNascimento DateTime
  estadoId       String
  estado         Estado      @relation(fields: [estadoId], references: [id])
  partidoId      String
  partido        Partido     @relation(fields: [partidoId], references: [id])
  profissoes     Profissao[]
  projetos       Projeto[]   @relation("ProjetoAutores")
}

model Partido {
  id        String     @id @default(uuid()) @db.VarChar(36)
  nome      String     @unique
  codigo    String     @unique
  politicos Politico[]
  projetos  Projeto[]
}

model Estado {
  id        String     @id @default(uuid()) @db.VarChar(36)
  nome      String     @unique
  politicos Politico[]
}

model Esfera {
  id       String    @id @default(uuid()) @db.VarChar(36)
  nome     String
  projetos Projeto[]
}

model DireitoViolado {
  id       String    @id @default(uuid()) @db.VarChar(36)
  nome     String
  projetos Projeto[]
}

model Ideologia {
  id       String    @id @default(uuid()) @db.VarChar(36)
  nome     String
  projetos Projeto[]
}

model Profissao {
  id   String @id @default(uuid()) @db.VarChar(36)
  nome String @unique
  politicos Politico[]
}

model Pauta {
  id        String @id @default(uuid()) @db.VarChar(36)
  nome      String @unique
  projetos  Projeto[]
}